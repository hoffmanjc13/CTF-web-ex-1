<!DOCTYPE html>
<head>
  <title>TGG - Reset Password</title>
  <link rel = "stylesheet"
    type = "text/css"
    href = "stylesheet.css" />
  <link rel="icon" type="image/x-icon" href="favicon.png">
</head>

<body style="background-color: #E6E6EC">
  <header id='header' style="background-color: #3a416f">
	<div id='logo' itemscope itemtype='https://schema.org/Organization'>
	    <img class='logoimg' src='icon.png' alt='Haha' width="60" height="60" />
	</div>
  </header>

  <script>
	String.prototype.hashCode = function() {
		var hash = 0,
			i, chr;
		if (this.length === 0) return hash;
		for (i = 0; i < this.length; i++) {
			chr = this.charCodeAt(i);
			hash = ((hash << 5) - hash) + chr;
			hash |= 0; // Convert to 32bit integer
		}
		return hash;
		}

	function check_qs() {
		var firstq = document.getElementById('secq1').value;
		var firsta = document.getElementById('seca1').value.hashCode();
		
		if (firsta == 0) {
			console.log("no 1");
			document.getElementById("error-text").textContent = "Please answer all questions";
			
			document.getElementById('seca1').style.border = "1px solid red";
			document.getElementById('seca1').style.setProperty("--c", "red")
			document.getElementById('seca1').style.backgroundColor = "#ff9999";
		}

		var scndq = document.getElementById('secq2').value;
		var scnda = document.getElementById('seca2').value.hashCode();
		
		if (scnda == 0) {
			console.log("no 2");
			document.getElementById("error-text").textContent = "Please answer all questions";
			
			document.getElementById('seca2').style.border = "1px solid red";
			document.getElementById('seca2').style.setProperty("--c", "red")
			document.getElementById('seca2').style.backgroundColor = "#ff9999";
		}

		var thirdq = document.getElementById('secq3').value;
		var thirda = document.getElementById('seca3').value.hashCode();
		
		if (thirda == 0) {
			console.log("no 3");
			document.getElementById("error-text").textContent = "Please answer all questions";
			
			document.getElementById('seca3').style.border = "1px solid red";
			document.getElementById('seca3').style.setProperty("--c", "red")
			document.getElementById('seca3').style.backgroundColor = "#ff9999";
		}
		
		if (firsta == 0 || scnda == 0 || thirda == 0) return;
		
		if (firstq == scndq || scndq == thirdq || thirdq == firstq){
			document.getElementById("error-text").textContent = "Must answer three diffrent questions";
			return;
		}

		if ((firstq == "DadBD" && firsta == -1333533104) || (firstq == "FavCol" && firsta == 3027034) || (firstq == "Pet" && firsta == 74516386)) {
			console.log("1/3");
			if ((scndq == "DadBD" && scnda == -1333533104) || (scndq == "FavCol" && scnda == 3027034) || (scndq == "Pet" && scnda == 74516386)) {
				console.log("2/3");
				if ((thirdq == "DadBD" && thirda == -1333533104) || (thirdq == "FavCol" && thirda == 3027034) || (thirdq == "Pet" && thirda == 74516386)) {
					console.log("3/3");
					window.location.href = "login.html";
					return;
				}
			}
		}
		document.getElementById("error-text").textContent = "At least one answer is not correct. Please try again.";
	}
	
	
	function reset_style(input_box) {
		input_box.style.border = "1px solid white";
		input_box.style.backgroundColor = "white";
		input_box.style.Color = "black";
		input_box.style.setProperty("--c", "#8F8F90")
	}
	
  </script>
  
  <div class="secq-form">
  
		<h2 id="q-prompt">Fill out security questions:</h2>
  
		<label class="hidden" id="error-text"></label>
	  
		<div class="secq-section">
	    <label class="secq_label" for="secq1">Choose a security question to answer:</label>
		<div class="secq-line">
			<select class="seq-field" name="secq1" id="secq1">
			  <option value="MomMaidenName">What's your mother's maiden name?</option>
			  <option value="Car">What was your first car?</option>
			  <option value="Pet">What's your pet's name?</option>
			  <option value="DadBD">What's your father's birthday?</option>
			  <option value="Street">What street did you grow up on?</option>
			  <option value="FavCol">What's your favorite color?</option>
			</select>
			<input class="seq-field" type="text" name="seca1" id="seca1" placeholder="Answer" required onInput="reset_style(this)">
		</div>
		
		<label class="secq_label" for="secq2">Choose a security question to answer:</label>
		<div class="secq-line">
		    <select class="seq-field" name="secq2" id="secq2">
			  <option value="Car">What was your first car?</option>
			  <option value="Pet">What's your pet's name?</option>
			  <option value="DadBD">What's your father's birthday?</option>
			  <option value="Street">What street did you grow up on?</option>
			  <option value="FavCol">What's your favorite color?</option>
			  <option value="Car">What was your first car?</option>
			  <option value="MomMaidenName">What's your mother's maiden name?</option>
			</select>
			<input class="seq-field" type="text" name="seca2" id="seca2" placeholder="Answer" required onInput="reset_style(this)">
		</div>
		
		<label class="secq_label" for="secq3">Choose a security question to answer:</label>
		<div class="secq-line">
		    <select class="seq-field" name="secq3" id="secq3">
			  <option value="Pet">What's your pet's name?</option>
			  <option value="DadBD">What's your father's birthday?</option>
			  <option value="Street">What street did you grow up on?</option>
			  <option value="FavCol">What's your favorite color?</option>
			  <option value="MomMaidenName">What's your mother's maiden name?</option>
			  <option value="Car">What was your first car?</option>
			</select>
			<input class="seq-field" type="text" name="seca3" id="seca3" placeholder="Answer" required onInput="reset_style(this)">
		</div>
	</div>
	
	<div class="form-control">
		<input class="secq-button" type="submit" value="BACK" onclick="window.location.href = 'index.html';">
		<input class="secq-button" type="submit" value="SUBMIT" onclick="check_qs()">
	</div>
</div>
  
  <footer id='footer' style="background-color: #10a3a2">
	<p>Made by Julia Hoffman | &copy2023 The Golden Goose Restaurant Corp. All rights reserved.</p>
  </footer>
</body>